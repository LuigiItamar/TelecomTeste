<h5>{{ model.id ? 'Editar Contrato' : 'Novo Contrato' }}</h5>

<div *ngIf="erro" class="alert alert-danger">{{ erro }}</div>

<form #form="ngForm" (ngSubmit)="onSubmit()">
  <div class="mb-3">
    <label for="nomeFilial" class="form-label">Nome da Filial</label>
    <input
      id="nomeFilial"
      name="nomeFilial"
      class="form-control"
      required
      [(ngModel)]="model.nomeFilial"
      #nomeFilial="ngModel"
    />
    <div *ngIf="nomeFilial.invalid && nomeFilial.touched" class="text-danger">
      Campo obrigatório
    </div>
  </div>

  <div class="mb-3">
    <label for="operadoraId" class="form-label">Operadora</label>
    <select
      id="operadoraId"
      name="operadoraId"
      class="form-select"
      required
      [(ngModel)]="model.operadoraId"
      #operadoraId="ngModel"
    >
      <option value="" disabled>Selecione</option>
      <option *ngFor="let op of operadoras" [value]="op.id">{{ op.nome }}</option>
    </select>
    <div *ngIf="operadoraId.invalid && operadoraId.touched" class="text-danger">
      Campo obrigatório
    </div>
  </div>

  <div class="mb-3">
    <label for="planoContratado" class="form-label">Plano Contratado</label>
    <input
      id="planoContratado"
      name="planoContratado"
      class="form-control"
      required
      [(ngModel)]="model.planoContratado"
      #planoContratado="ngModel"
    />
    <div *ngIf="planoContratado.invalid && planoContratado.touched" class="text-danger">
      Campo obrigatório
    </div>
  </div>

  <div class="mb-3">
    <label for="dataInicio" class="form-label">Data de Início</label>
    <input
      id="dataInicio"
      name="dataInicio"
      type="date"
      class="form-control"
      required
      [(ngModel)]="model.dataInicio"
      #dataInicio="ngModel"
    />
    <div *ngIf="dataInicio.invalid && dataInicio.touched" class="text-danger">
      Campo obrigatório
    </div>
  </div>

  <div class="mb-3">
    <label for="dataVencimento" class="form-label">Data de Vencimento</label>
    <input
      id="dataVencimento"
      name="dataVencimento"
      type="date"
      class="form-control"
      required
      [(ngModel)]="model.dataVencimento"
      #dataVencimento="ngModel"
    />
    <div *ngIf="dataVencimento.invalid && dataVencimento.touched" class="text-danger">
      Campo obrigatório
    </div>
  </div>

  <div class="mb-3">
    <label for="valorMensal" class="form-label">Valor Mensal</label>
    <input
      id="valorMensal"
      name="valorMensal"
      type="number"
      class="form-control"
      required
      min="0"
      step="0.01"
      [(ngModel)]="model.valorMensal"
      #valorMensal="ngModel"
    />
    <div *ngIf="valorMensal.invalid && valorMensal.touched" class="text-danger">
      Campo obrigatório
    </div>
  </div>

  <div class="mb-3">
    <label for="status" class="form-label">Status</label>
    <select
      id="status"
      name="status"
      class="form-select"
      required
      [(ngModel)]="model.status"
      #status="ngModel"
    >
      <option value="" disabled>Selecione</option>
      <option *ngFor="let s of statusList" [value]="s">{{ s }}</option>
    </select>
    <div *ngIf="status.invalid && status.touched" class="text-danger">
      Campo obrigatório
    </div>
  </div>

  <button
    type="submit"
    class="btn btn-primary"
    [disabled]="form.invalid || carregando"
  >
    Salvar
  </button>
  <button
    type="button"
    class="btn btn-secondary ms-2"
    (click)="cancelar()"
    [disabled]="carregando"
  >
    Cancelar
  </button>
</form> 